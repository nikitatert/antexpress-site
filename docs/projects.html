<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Проекты — АНТэкспресс</title>
  <meta name="description" content="Проекты и кейсы компании АНТэкспресс." />
  <link rel="icon" href="./logo.png" type="image/png" />
  <link rel="stylesheet" href="./style.css" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <style>
    .map-wrap{margin-top:28px}
    #ru-map{
      height: 520px;
      width: 100%;
      border:1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }
    .leaflet-tooltip{
      font-size: 12px;
      font-weight: 600;
      border-radius: 8px;
      padding: 4px 6px;
    }
    @media (max-width: 640px){
      #ru-map{height: 400px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a class="logo" href="./index.html"><img src="./logo.png" alt="АНТэкспресс" width="200" height="58"/></a>
      <nav>
        <a href="./about.html">О компании</a>
        <a href="./projects.html">Проекты</a>
        <a href="./contacts.html">Контакты</a>
      </nav>
    </header>

    <main>
      <section class="hero section">
        <h1>Проекты и кейсы</h1>
        <p>Выдержка из направлений, где мы работаем как единый подрядчик по снабжению и логистике.</p>
      </section>

      <section class="section">
        <div class="list">
          <a class="card" href="./project-nikolo-dol.html"><h3>Николо-Дол</h3></a>
          <a class="card" href="./project-skandinaviya.html"><h3>Скандинавия</h3></a>
          <a class="card" href="./project-sakhalin.html"><h3>Сахалин</h3></a>
          <a class="card" href="./project-baikal.html"><h3>Байкал</h3></a>
        </div>
      </section>

      <!-- География проектов -->
      <section class="section">
        <h2>География проектов</h2>
        <p>Точки присутствия и ключевые площадки поставок.</p>
        <div class="map-wrap">
          <div id="ru-map" aria-label="Карта проектов АНТэкспресс"></div>
        </div>
      </section>
    </main>

    <footer>
      <div>© <span id="y"></span> ООО «АНТэкспресс». Все права защищены.</div>
      <div><a href="./privacy.html" style="color:var(--muted);">Политика конфиденциальности</a></div>
    </footer>
  </div>

  <script>document.getElementById('y').textContent=new Date().getFullYear()</script>
  <script>
    // highlight current nav link
    document.querySelectorAll('nav a').forEach(a=>{
      if(a.href===window.location.href){a.classList.add('active')}
    });
  </script>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  <script>
    // ------ Init map focused on Russia only ------
    const RUSSIA_BOUNDS = L.latLngBounds(
      [41.0, 19.0],   // SW (approx)
      [82.0, 190.0]   // NE (approx, includes Far East across 180°)
    );

    const map = L.map('ru-map', {
      scrollWheelZoom: false,
      worldCopyJump: false,
      maxBounds: RUSSIA_BOUNDS,
      maxBoundsViscosity: 0.8
    }).setView([61.5, 96], 3.7);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // ------ Your 5 locations ------
    // Coords are practical, can be refined later if needed.
    const locations = [
      // 1) Скандинавия (МО, Коммунарка / м. «Потапово»)
      [55.536, 37.541, "МО, Коммунарка — ЖК «Скандинавия Юг», м. «Потапово»", "./project-skandinaviya.html"],
      // 2) Сахалин — СТК «Горный воздух», Южно-Сахалинск
      [46.957, 142.736, "Южно-Сахалинск — СТК «Горный воздух»", "./project-sakhalin.html"],
      // 3) Калужская область — усадьба Гурьевых (ориентир: г. Калуга)
      [54.5144, 36.2550, "Калужская обл. — на месте усадьбы Гурьевых XVIII века", "./project-nikolo-dol.html"],
      // 4) Север Байкала — с. Турка, ОЭЗ «Байкальская гавань»
      [53.780, 108.261, "Респ. Бурятия, с. Турка — ОЭЗ «Байкальская гавань»", "./project-baikal.html"],
      // 5) Санкт-Петербург — ул. Новая, д. 51, к. 79, стр. 1 (рядом с Лахта Центром)
      [60.010, 30.260, "Санкт-Петербург, ул. Новая, д. 51, к. 79, стр. 1 (10 минут от «Лахта Центра»)", "./project-skandinaviya.html"]
    ];

    const pin = L.icon({
      iconUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
      shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
      iconSize:[25,41], iconAnchor:[12,41],
      popupAnchor:[1,-34], shadowSize:[41,41]
    });

    const group = L.featureGroup();

    locations.forEach(([lat, lon, label, link])=>{
      const m = L.marker([lat, lon], {icon:pin})
        .bindTooltip(label, {direction:'top', offset:[0,-12]})
        .bindPopup(`<strong>${label}</strong>${link ? '<br><a href="'+link+'">Открыть проект</a>' : ''}`);
      if (link){
        m.on('click', ()=> window.location.href = link);
      }
      group.addLayer(m);
    });

    group.addTo(map);
    map.fitBounds(group.getBounds().pad(0.25));
  </script>
</body>
</html>
